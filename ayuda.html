<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Ayuda - SIGESCON</title>

    <!-- Estilos -->
    <link rel="stylesheet" href="css/ayuda.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

</head>
<body>
    <header>
        <h1><i class="fas fa-info-circle"></i> Ayuda - SIGESCON</h1>
        <div class="header-buttons">
            <a href="index.html" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Volver al Inicio</a>
        </div>
    </header>

    <main>
        <!-- Barra de Búsqueda -->
        <section class="card help-section">
            <h2 class="section-title"><i class="fas fa-search"></i> Buscar en la Ayuda</h2>
            <div class="input-group mb-3">
                <input type="text" id="help-search-input" class="form-control" placeholder="Escribe para buscar en la documentación...">
                <button class="btn btn-primary" type="button" id="help-search-button"><i class="fas fa-search"></i> Buscar</button>
            </div>
            <div id="help-search-results" class="mt-3"></div>
        </section>

        <!-- Introducción -->
        <section id="introduccion" class="card help-section">
            <h2 class="section-title"><i class="fas fa-home"></i> Introducción a SIGESCON</h2>
            <p>SIGESCON es un sistema integral para la gestión de contratos empresariales que te permite:</p>
             <ul>
                 <li>Gestionar contratos y sus partidas</li>
                 <li>Administrar HES (Hojas de Estimación de Servicios)</li>
                 <li>Seguir el avance físico y financiero</li>
                 <li>Generar reportes detallados</li>
             </ul>
        </section>

        <!-- Gestión de Contratos -->
        <section id="gestion-contratos" class="card help-section">
            <h2 class="section-title"><i class="fas fa-file-contract"></i> Módulo: Gestión de Contratos</h2>
            <p>Este módulo te permite crear, ver, editar y eliminar contratos, así como gestionar sus partidas asociadas.</p>

            <h3><i class="fas fa-plus"></i> Crear un Nuevo Contrato</h3>
            <ol>
                <li>Haz clic en "Nuevo/Editar Contrato" en el menú lateral.</li>
                <li>Completa los campos requeridos, como N° Proveedor, Fechas (Firma, Creación, Inicio, Terminación Original), Monto Original, Estatus, Modalidad, etc.</li>
                <li><strong>Nuevos Campos de Extensión:</strong> Puedes añadir Días de Extensión para calcular automáticamente una Fecha de Terminación Extendida. Esto ayuda a proyectar la duración final del contrato.</li>
                <li><strong>Gestión de Partidas:</strong> Utiliza el botón "<i class=\"fas fa-plus\"></i> Añadir Partida" para listar los ítems o servicios incluidos en el contrato, con su cantidad, unidad de medida y precio unitario. El total de la partida y el Monto Original del Contrato se calcularán automáticamente.</li>
                <li><strong>Monto Modificado:</strong> Puedes ingresar un Monto Modificado adicional o de reducción que se sumará/restará al Monto Original para obtener el Monto Total del Contrato.</li>
                <li><strong>Archivos Adjuntos:</strong> Puedes adjuntar archivos relevantes al contrato. Estos se guardan localmente.</li>
                <li>Haz clic en "Guardar Contrato".</li>
            </ol>

            <h3><i class="fas fa-edit"></i> Editar un Contrato Existente</h3>
            <ol>
                <li>Ve al módulo "Lista de Contratos".</li>
                <li>Encuentra el contrato que deseas editar (puedes usar los filtros si es necesario).</li>
                <li>Haz clic en el botón con el icono de lápiz (<i class="fas fa-edit"></i>) en la fila del contrato.</li>
                <li>El formulario "Nuevo/Editar Contrato" se llenará con los datos del contrato seleccionado.</li>
                <li>Realiza los cambios necesarios (incluyendo partidas, montos o fechas de extensión).</li>
                <li>Haz clic en "Guardar Contrato" (ahora actuará como Actualizar).</li>
            </ol>

             <h3><i class="fas fa-trash"></i> Enviar Contrato a la Papelera</h3>
             <p>Si ya no necesitas un contrato, puedes enviarlo a la papelera:</p>
             <ol>
                 <li>Ve al módulo "Lista de Contratos".</li>
             <li>Haz clic en el botón con el icono de papelera (<i class="fas fa-trash"></i>) en la fila del contrato.</li>
             <li>Confirma la acción cuando se te solicite.</li>
             <li>El contrato y sus HES/Partidas asociadas serán movidos a la Papelera de Reciclaje, no eliminados permanentemente de inmediato.</li>
             </ol>

             <h3>Alerta de Vencimiento</h3>
             <p>El sistema te notificará con una alerta si un contrato tiene una fecha de terminación (o terminación extendida) que se encuentra a 20 días o menos de la fecha actual.</p>

        </section>

        <!-- Gestión de HES -->
        <section id="gestion-hes" class="card help-section">
            <h2 class="section-title"><i class="fas fa-clipboard-list"></i> Módulo: Gestión de HES</h2>
            <p>Las HES (Hojas de Estimación de Servicios) registran los avances y montos ejecutados para un contrato en un período determinado.</p>
            <p>En este módulo, seleccionas un contrato y registras las partidas que se han ejecutado dentro de una HES específica.</p>

            <h3><i class="fas fa-plus"></i> Crear una Nueva HES</h3>
            <ol>
                <li>Haz clic en "Gestión de HES" en el menú lateral.</li>
                <li>Selecciona el Contrato asociado a la HES en el menú desplegable.</li>
                <li>Ingresa el N° HES, Fechas (Inicio y Final de la HES), y otros detalles como Aprobado, Texto Breve, etc.</li>
                <li><strong>Registro de Ejecución de Partidas:</strong> En la tabla inferior, verás las partidas del contrato seleccionado. Ingresa la "Cantidad a Ejecutar" para cada partida que se haya realizado en esta HES. El sistema validará que la cantidad no exceda la cantidad restante disponible para esa partida en el contrato.</li>
                 <li><strong>Monto Adicional Manual:</strong> Ahora puedes ingresar un monto adicional manualmente por partida en la HES si es necesario (por ejemplo, para ajustes). Este monto se sumará al cálculo basado en la cantidad ejecutada y el precio unitario de la partida para obtener el total de esa partida en la HES.</li>
                <li>El Subtotal, Gastos Administrativos (5% del subtotal) y el Total de la HES se calcularán automáticamente. Ahora el porcentaje de gastos administrativos es configurable.</li>
                 <li><strong>Validación de Monto Total:</strong> El sistema validará que el monto total de la HES (incluyendo montos adicionales manuales) no supere el Monto Total del Contrato asociado.</li>
                <li>Adjunta Anexos si es necesario.</li>
                <li>Haz clic en "Guardar HES".</li>
            </ol>

            <h3><i class="fas fa-edit"></i> Editar una HES Existente</h3>
            <ol>
                <li>Ve a la lista de HES en la parte inferior del módulo "Gestión de HES".</li>
                <li>Encuentra la HES que deseas editar.</li>
                <li>Haz clic en el botón con el icono de lápiz (<i class="fas fa-edit"></i>) en la fila de la HES.</li>
                <li>El formulario se llenará con los datos de la HES.</li>
                <li>Realiza los cambios necesarios (fechas, estatus, cantidades ejecutadas, montos adicionales).</li>
                <li>Haz clic en "Guardar HES" (ahora actuará como Actualizar).</li>
            </ol>

            <h3><i class="fas fa-trash"></i> Enviar HES a la Papelera</h3>
             <p>Si necesitas eliminar una HES:</p>
             <ol>
                 <li>Ve a la lista de HES.</li>
             <li>Haz clic en el botón con el icono de papelera (<i class="fas fa-trash"></i>) en la fila de la HES.</li>
             <li>Confirma la acción.</li>
             <li>La HES será movida a la Papelera de Reciclaje.</li>
             </ol>
        </section>

        <!-- Avance Físico -->
        <section id="avance-fisico" class="card help-section">
            <h2 class="section-title"><i class="fas fa-chart-line"></i> Módulo: Avance Físico</h2>
            <p>Permite registrar avances manuales de progreso físico en porcentajes (%) para cada contrato.</p>
            <h3><i class="fas fa-plus"></i> Registrar Avance</h3>
            <p>El avance físico se calcula automáticamente en función de las cantidades ejecutadas en las HES.</p>

            <h3><i class="fas fa-history"></i> Historial de Avances</h3>
            <p>Se guarda un historial completo de avances físicos por contrato, mostrando:</p>
            <ul>
                <li>Fecha</li>
                <li>Porcentaje</li>
                <li>Monto del avance</li>
                <li>Descripción</li>
            </ul>
        </section>

        <!-- Resumen Gráfico -->
         <section id="resumen-grafico" class="card help-section">
             <h2 class="section-title"><i class="fas fa-chart-bar"></i> Módulo: Resumen Gráfico</h2>
             <p>Ofrece visualizaciones gráficas de tus datos para un mejor entendimiento.</p>
             <ul>
                 <li><strong>Gráficos Generales:</strong> Al acceder a la pestaña de "Resumen Gráfico", verás gráficos que resumen el estatus y las modalidades de todos tus contratos.</li>
                 <li><strong>Gráficos por Contrato:</strong> Puedes seleccionar un contrato específico y un tipo de gráfico (Barras, Línea - para avance financiero) para ver una representación visual de su progreso o detalles.</li>
                 <li><strong>Línea de Tiempo Financiera:</strong> El gráfico de tipo "Línea" para un contrato muestra la evolución del monto financiero ejecutado a lo largo del tiempo, basado en las fechas de las HES.</li>
                 <li><strong>Exportar Gráficos:</strong> Puedes exportar el gráfico visual actual a formato PNG. También puedes exportar los datos subyacentes de algunos gráficos a Excel o PDF (revisa las opciones de exportación disponibles).</li>
             </ul>
         </section>

         <!-- Informes -->
          <section id="informes" class="card help-section">
              <h2 class="section-title"><i class="fas fa-file-alt"></i> Módulo: Informes</h2>
              <p>Genera informes detallados de contratos individuales y gestiona la configuración del sistema.</p>
              
              <h3>Informes de Contrato</h3>
              <p>Selecciona un contrato en el menú desplegable para ver un resumen, partidas asociadas, historial de HES y gráficos interactivos.</p>
              
              <h3>Configuración del Sistema</h3>
              <p>Aquí puedes:</p>
              <ul>
                  <li>Configurar los <strong>Días de Alerta</strong> para vencimientos (1-365 días).</li>
                  <li>Importar y Exportar la base de datos.</li>
              </ul>

          </section>

         <!-- Papelera de Reciclaje -->
         <section id="papelera" class="card help-section">
             <h2 class="section-title"><i class="fas fa-trash-alt"></i> Papelera de Reciclaje</h2>
             <p>Cuando eliminas contratos o HES, no se borran permanentemente de inmediato. Se mueven a la papelera, donde puedes revisarlos, restaurarlos o eliminarlos definitivamente.</p>
             <ul>
                 <li>Ve a la pestaña "Papelera de Reciclaje".</li>
                 <li>Verás listas separadas para Contratos Eliminados y HES Eliminadas.</li>
                 <li><strong>Restaurar:</strong> Haz clic en el botón "<i class="fas fa-undo"></i> Restaurar" para mover un elemento de vuelta a su sección original.</li>
                 <li><strong>Eliminar Permanentemente:</strong> Borra el elemento de la base de datos de forma irreversible.</li>
             </ul>
         </section>

    </main>
    
    <div id="toast-container"></div> <footer class="footer text-center py-3">
        <p class="mb-0">&copy; 2025 SIGESCON - Gestión de Contratos Empresariales.</p>
        <p class="mb-0">Desarrollado por RojasTech - Contacto: <a href="mailto:angeljrojasm@gmail.com">Enviar Correo</a></p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/script.js"></script> <!-- Asegurarse de incluir script.js si contiene lógica de ayuda -->
</body>
</html>